const apiKey = "2ae43de5bb60e0218feee94c5cd93c82"; // Replace with a secure method for storing API keys
const apiUrl = `https://api.aviationstack.com/v1/flights?access_key=${apiKey}&flight_status=active&arr_iata=GRU`;

// Fetch data and update the table
fetch(apiUrl)
  .then(response => response.json())
  .then(data => {
    const flights = data.data; // Access the flights array from the API response
    const tbody = document.querySelector("#flightTable tbody"); // Get the <tbody> element

    // Clear any existing rows in the <tbody>
    tbody.innerHTML = "";

    flights.forEach(flight => {
      // Extract relevant flight details
      const airline = flight.airline.name;
      const flightNumber = flight.flight.number;
      const origin = flight.departure.iata;
      const scheduledArrival = flight.arrival.scheduled;
      const estimatedArrival = flight.arrival.estimated;
      const delay = flight.arrival.delay || 0; // Default to 0 if no delay

      // Create a new row
      const row = document.createElement("tr");

      // Add cells with flight data
      row.innerHTML = `
        <td>${airline}</td>
        <td>${flightNumber}</td>
        <td>${origin}</td>
        <td>${scheduledArrival}</td>
        <td>${estimatedArrival}</td>
        <td>${delay}</td>
      `;

      // Append the row to the <tbody>
      tbody.appendChild(row);
    });
  })
  .catch(error => console.error("Error fetching flight data:", error));
